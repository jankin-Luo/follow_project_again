{"name": "正常新增用户", "status": "failed", "statusDetails": {"message": "AssertionError", "trace": "self = <common.assertions.Assertions object at 0x106adbc10>\nexpected = [{'contains': {'status_code': 200}}, {'contains': {'msg': '新增成功'}}]\nresponse = {'msg': '新增失败', 'msg_code': 9001}, status_code = 200\n\n    def assert_result(self, expected, response, status_code):\n        '''\n        断言模式，通过all_flag标记\n        :param expoected:预期结果\n        :param response:接口实际返回结果\n        :param status_code:接口实际返回状态码\n        :return:\n        '''\n        # 0代表成功\n        all_flag = 0\n        try:\n            for yq in expected:\n                for k, v in yq.items():\n                    if k == 'contains':\n                        flag = self.contains_assert(v, response, status_code)\n                        all_flag += flag\n                    elif k == 'eq':\n                        flag = self.equal_assert(v, response)\n                        all_flag += flag\n                    elif k == 'ne':\n                        flag = self.not_equal_assert(v, response)\n                        all_flag += flag\n                    elif k == 'db':\n                        flag = self.assert_mysql(v)\n                        all_flag += flag\n>           assert all_flag == 0\nE           AssertionError\n\n../../common/assertions.py:148: AssertionError\n\nDuring handling of the above exception, another exception occurred:\n\nself = <test_debug_api.TestUserManager object at 0x1071bf7c0>\nbaseinfo = {'api_name': '新增用户', 'header': {'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}, 'method': 'POST', 'url': '/dar/user/addUser'}\ntestcase = {'data': {'dates': '2023-12-31', 'password': 'tset6789890', 'phone': 13800000000, 'role_id': 123456789, ...}}\n\n    @allure.story(next(t_id) + \"新增用户\")\n    # 测试用例执行顺序设置\n    @pytest.mark.run(order=1)\n    # 参数化，yaml数据驱动\n    @pytest.mark.parametrize('baseinfo,testcase', get_testcase_yaml(\"addUser.yaml\"))\n    def test_add_user(self, baseinfo, testcase):\n        allure.dynamic.title(testcase['case_name'])\n>       BaseRequest().specification_yaml(baseinfo, testcase)\n\ntest_debug_api.py:20: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n../../base/apiutil.py:115: in specification_yaml\n    raise e\n../../base/apiutil.py:112: in specification_yaml\n    assert_res.assert_result(validation, res_json, res.status_code)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ \n\nself = <common.assertions.Assertions object at 0x106adbc10>\nexpected = [{'contains': {'status_code': 200}}, {'contains': {'msg': '新增成功'}}]\nresponse = {'msg': '新增失败', 'msg_code': 9001}, status_code = 200\n\n    def assert_result(self, expected, response, status_code):\n        '''\n        断言模式，通过all_flag标记\n        :param expoected:预期结果\n        :param response:接口实际返回结果\n        :param status_code:接口实际返回状态码\n        :return:\n        '''\n        # 0代表成功\n        all_flag = 0\n        try:\n            for yq in expected:\n                for k, v in yq.items():\n                    if k == 'contains':\n                        flag = self.contains_assert(v, response, status_code)\n                        all_flag += flag\n                    elif k == 'eq':\n                        flag = self.equal_assert(v, response)\n                        all_flag += flag\n                    elif k == 'ne':\n                        flag = self.not_equal_assert(v, response)\n                        all_flag += flag\n                    elif k == 'db':\n                        flag = self.assert_mysql(v)\n                        all_flag += flag\n            assert all_flag == 0\n            logs.info('测试成功')\n        except Exception as e:\n            logs.error('测试失败')\n            logs.error(f'异常信息{e}')\n>           assert False\nE           AssertionError\n\n../../common/assertions.py:153: AssertionError"}, "attachments": [{"name": "接口地址:http://127.0.0.1:8787/dar/user/addUser", "source": "e667b1f7-8648-44b0-a3c6-92690983dd4c-attachment.attach"}, {"name": "接口名称:新增用户", "source": "c2f1b752-e3dd-4fbc-9dc3-1b73767254df-attachment.attach"}, {"name": "请求方法:POST", "source": "67db1fc3-2157-4a20-bd42-265286e7df21-attachment.attach"}, {"name": "请求头:{'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'}", "source": "bfe0a89f-5586-46ac-b1a3-9612077daf64-attachment.txt", "type": "text/plain"}, {"name": "测试用例名称:正常新增用户", "source": "4acfb8ad-9ba0-45ee-864e-9b0cf0124471-attachment.attach"}, {"name": "请求参数：{\"data\": {\"username\": \"testadduser\", \"password\": \"tset6789890\", \"role_id\": 123456789, \"dates\": \"2023-12-31\", \"phone\": 13800000000, \"token\": \"None\"}}", "source": "5b82a4ca-15b6-4ca8-9f99-853612bdacf0-attachment.txt", "type": "text/plain"}, {"name": "接口响应信息", "source": "319d2b7b-cd88-4e57-b058-0e2a2082cbc2-attachment.txt", "type": "text/plain"}, {"name": "接口响应码", "source": "caab675b-7e52-4bc1-ae33-7bd816bbf66c-attachment.txt", "type": "text/plain"}, {"name": "响应文本断言结果:失败", "source": "6a8fc4c4-100f-4e25-9158-96b5ec385709-attachment.txt", "type": "text/plain"}, {"name": "log", "source": "8eadcee0-d57f-4823-908a-e0a39712c72d-attachment.txt", "type": "text/plain"}], "start": 1762439060017, "stop": 1762439060026, "uuid": "5e7e1be0-7be1-4423-a136-b014455e09bf", "historyId": "37cf0d175a552f57ad9469bc9f0b52e8", "testCaseId": "37cf0d175a552f57ad9469bc9f0b52e8", "fullName": "testcase.Single interface.test_debug_api.TestUserManager#test_add_user", "labels": [{"name": "feature", "value": "M01_用户管理模块（单接口）"}, {"name": "story", "value": "T001_新增用户"}, {"name": "parentSuite", "value": "testcase.Single interface"}, {"name": "suite", "value": "test_debug_api"}, {"name": "subSuite", "value": "TestUserManager"}, {"name": "host", "value": "gongxydeMacBook-Air.local"}, {"name": "thread", "value": "15166-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "testcase.Single interface.test_debug_api"}], "titlePath": ["testcase", "Single interface", "test_debug_api.py", "TestUserManager"]}